---
import { UserDetailContainer } from '~/features/admin'
import AdminLayout from '~/layouts/AdminLayout.astro'
import type { User } from '~/types/user.types'

const { user } = Astro.locals

if (!user) {
  return Astro.redirect('/auth')
}

const userData = user as User

if (userData.role !== 'admin') {
  return Astro.redirect('/')
}

const { id } = Astro.params

if (!id) {
  return Astro.redirect('/admin/users')
}
---

<AdminLayout title='User Details'>
  <header class='mb-8 flex items-center gap-4'>
    <a href='/admin/users' class='text-sky-400 hover:underline'>â† Back to Users</a>
  </header>
  <UserDetailContainer client:load userId={id} />
</AdminLayout>
